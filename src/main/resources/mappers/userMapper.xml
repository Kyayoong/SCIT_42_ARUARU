<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper
    PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN"
    "http://mybatis.org/dtd/mybatis-3-mapper.dtd">

<mapper namespace="com.restaurantreservation.aruaru.dao.UserDao">
	<!-- 회원가입 -->
	<insert id="insertUser" parameterType="User_member">
		INSERT INTO user_member
		(member_num
		, member_id
		, member_pw
		, member_birth
		, member_name
		, member_phone
		, member_email
		, member_tags
		,
		member_address1
		, member_address2
		, member_gender
		, member_nickname
		<if test="member_originalfile != null and member_savedfile != null">
			, member_originalfile
			, member_savedfile
		</if>
		)
		VALUES
		(user_member_seq.nextval
		, #{member_id}
		, #{member_pw}
		,
		#{member_birth}
		, #{member_name}
		, #{member_phone}
		, #{member_email}
		,
		#{member_tags}
		, #{member_address1}
		, #{member_address2}
		,
		#{member_gender}
		, #{member_nickname}
		<if test="member_originalfile != null and member_savedfile != null">
			, #{member_originalfile}
			, #{member_savedfile}
		</if>
		)
	</insert>

	<select id="selectOne" parameterType="string"
		resultType="User_member">
		SELECT * from user_member
		WHERE member_id = #{member_id}
	</select>

	<select id="findID" parameterType="String" resultType="String">
		SELECT
		member_id
		WHERE member_name = #{member_name}
	</select>

	<update id="updateUser" parameterType="User_member">
		UPDATE user_member
		SET
		member_pw = #{member_pw},
		member_name =
		#{member_name},
		member_nickname
		= #{member_nickname},
		member_email =
		#{member_email},

		member_phone =
		#{member_phone},
		member_address1 = #{member_address1},
		member_address2 =
		#{member_address2},
		member_birth = #{member_birth},
		member_tags =
		#{member_tags}
		<if test="member_originalfile != null and member_savedfile != null">
			, member_originalfile = #{member_originalfile}
			, member_savedfile = #{member_savedfile}
		</if>
		WHERE member_id = #{member_id}
	</update>

	<delete id="deleteUser" parameterType="String">
		DELETE user_member
		WHERE member_id = #{member_id}
	</delete>
	<select id="findBoardById" parameterType="String" resultType="Web_board">
	SELECT
	*
	FROM
	Web_board
	WHERE
	member_id = #{member_id}
	order by
	board_num
	desc
	</select>
	<insert id="insertBoard" parameterType="Web_board">
	INSERT INTO 
	web_board 
	(
	board_num 
	, member_id
	, board_title
	, board_contents
	, category
	)
	VALUES
	( 
	web_board_seq.nextval
	, #{member_id}
	, #{board_title}
	, #{board_contents}
	, #{category}
	)
	</insert>
	<select id="findBoard" parameterType="Int" resultType="Web_board">
	SELECT
	*
	FROM
	web_board
	WHERE 
	board_num
	= #{board_num}
	</select>
	
	<select id="seeAllReservation" parameterType="Reservation">
	
	</select>
	
</mapper>